<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <style>
    .formula-section.filled,.indicator-group.filled {
    background-color: #bfff96;
}
    #indicatorGroupsContainer {
    align-items: start;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
}
.indicator-group {
    justify-content: space-between;
    height: auto;
    display: flex;
    flex-direction: column;
    padding: 10px;
    border-radius: 5px;
    border: 2px dashed black;
    border-radius: 8px;
}
.indicator-group .year-inputs {
    margin-top: auto;
}
.indicator-group h3 {
    font-size: 1em;
    margin: 5px 0;
}
.indicator-group p {
    font-size: 0.85em;
    white-space: normal;
    margin: 5px 0 10px;
}
.year-input label {
    font-size: 0.8em;
}
.year-input input {
    padding: 4px;
    font-size: 0.85em;
}
        #formulasContainer {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
        }
        .formula-section {
            margin-bottom: 15px;
            padding: 10px;
            min-height: 150px;
            break-inside: avoid;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .input-incomplete {
            color: #888 !important;
        }
        .input-complete, .highlight-constant {
            color: #000 !important;
        }
        .formula-container {
            transition: opacity 0.2s ease-in-out;
            opacity: 1;
            margin: 1px 0;
            padding: 1px;
            font-size: 0.9em;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px auto;
            padding: 10px;
            background-color: #f5f5f5;
            position: relative;
        }
        .calculator {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 8px rgba(0,0,0,0.1);
        }
        .year-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 5px;
}
        .year-input {
            display: flex;
            flex-direction: column;
        }
        input {
            padding: 6px;
            border: 1px dashed black;
            border-radius: 8px;
            width: 100%;
            box-sizing: border-box;
        }
        #sortedResultsTable {
    margin-top: 20px;
    width: 100%;
    border: 1px solid black;
}
#sortedResultsTable th, #sortedResultsTable td {
    padding: 1px;
    text-align: center;
    font-size: 0.8em;
    border: 1px solid black;
}
#sortedResultsTable th {
    background-color: #f2f2f2;
}
#sortedResultsTable tr:nth-child(even) {
    background-color: #f9f9f9;
}
        #multiResultsTable {
    margin-top: 20px;
    width: 100%;
    border: 1px solid black;
}
#multiResultsTable th, #multiResultsTable td {
    padding: 1px;
    text-align: center;
    font-size: 0.8em;
    border: 1px solid black;
}
#multiResultsTable th {
    background-color: #f2f2f2;
}
#multiResultsTable tr:nth-child(even) {
    background-color: #f9f9f9;
}
        #calculationName::-webkit-input-placeholder, #calculationName::-moz-placeholder, #calculationName:-ms-input-placeholder, #calculationName:-moz-placeholder, #calculationName::placeholder {
    opacity: 1 !important;
}
        #uploadMultiJsonBtn:hover, #uploadJsonBtn:hover, #saveJsonBtn:hover, #calculationName:hover {
            opacity: 1;
}
#calculationName {
    top: 30px;
    width: 365px;
    background: #c7c7c7;
}
        #saveJsonBtn {
            top: 65px; 
            background: #ffae57;
        }
#uploadJsonBtn {
top: 100px;
background: #52b0fa; 
}
#uploadMultiJsonBtn {
top: 137px;
background: #52fa92; 
white-space: pre-line;
}
#uploadMultiJsonBtn, #uploadJsonBtn, #calculationName, #saveJsonBtn {
    padding: 5px 16px;
    border-radius: 4px; 
    right: 20px; 
    position: fixed;
    border: 1px solid black; 
    cursor: pointer;
    opacity:0.65;
    z-index: 1000;
}
    </style>
</head>
<body>
    <input type="text" id="calculationName" placeholder="1. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É (–∫—Ä–∞—â–µ 4-5 –ª—ñ—Ç–µ—Ä) ‚úèÔ∏è" >
    <button id="saveJsonBtn">2. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –¥–∞–Ω—ñ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É (–∫–æ–ª–∏ –≤–≤–µ–ª–∏ —ó—Ö) üíæ</button>
    <input type="file" id="uploadJson" accept=".json" hidden>
<label for="uploadJson" id="uploadJsonBtn">(—á–∏) –í—Å—Ç–∞–≤—Ç–µ –≥–æ—Ç–æ–≤–∏–π JSON –¥–ª—è –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É üìï</label>
<input type="file" id="uploadMultiJson" accept=".json" hidden multiple>
<label for="uploadMultiJson" id="uploadMultiJsonBtn">(—á–∏) –í—Å—Ç–∞–≤—Ç–µ –≥–æ—Ç–æ–≤—ñ JSON–∏ –¥–ª—è –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ–≤ üìö</label>
    <div class="calculator">
        <div id="indicatorGroupsContainer"></div>
        <div id="formulasContainer"></div>
        <div id="resultsContainer" class="results-container"></div>
        <div id="multiResultsContainer"></div>
        <div id="sortedResultsContainer"></div>
    </div>
<script>
    let dataStorage = {};
    let indicatorResults = {}; 
    let multiResults = [];
document.getElementById('uploadMultiJson').addEventListener('change', function(e) {
    const files = e.target.files;
    multiResults = [];
    Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = function(e) {
            const data = JSON.parse(e.target.result);
            multiResults.push({
                name: data.calculationName || file.name,
                results: data.calculatedResults
            });
            if (multiResults.length === files.length) {
                generateMultiResultsTable();
            }
        };
        reader.readAsText(file);
    });
});
function generateMultiResultsTable() {
    const container = document.getElementById('multiResultsContainer');
    container.innerHTML = '';
    if (multiResults.length === 0) return;
    const originalTable = document.createElement('table');
    originalTable.id = 'multiResultsTable';
    const headerRow = originalTable.insertRow();
    headerRow.insertCell().textContent = '–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª';
    for (let i = 1; i <= 37; i++) {
        const th = document.createElement('th');
        th.textContent = `I${i}`;
        headerRow.appendChild(th);
    }
    multiResults.forEach(resultData => {
        const row = originalTable.insertRow();
        row.insertCell().textContent = resultData.name;
        for (let i = 1; i <= 37; i++) {
            const cell = row.insertCell();
            const value = resultData.results[`I${i}`] || 0;
            cell.textContent = value.toFixed(4);
        }
    });
    container.appendChild(originalTable);
    const sortedContainer = document.getElementById('sortedResultsContainer');
    sortedContainer.innerHTML = '';
    const sortedTable = document.createElement('table');
    sortedTable.id = 'sortedResultsTable';
    const sortedData = {};
    for (let i = 1; i <= 37; i++) {
        const indicator = `I${i}`;
        const values = multiResults.map(dept => ({
            value: dept.results[indicator] || 0,
            name: dept.name
        }));
        values.sort((a, b) => b.value - a.value);
        sortedData[indicator] = values;
    }
    const medians = {};
    Object.keys(sortedData).forEach(indicator => {
        const values = sortedData[indicator];
        const length = values.length;
        if (length === 0) return;
        if (length % 2 === 1) { // Odd number of values
            medians[indicator] = [Math.floor(length / 2)];
        } else { // Even number of values
            medians[indicator] = [length / 2 - 1, length / 2];
        }
    });
    const sortedHeader = sortedTable.insertRow();
    for (let i = 1; i <= 37; i++) {
        const th = document.createElement('th');
        th.textContent = `I${i}`;
        sortedHeader.appendChild(th);
    }
    const maxRows = Math.max(...Object.values(sortedData).map(arr => arr.length));
    for (let rank = 0; rank < maxRows; rank++) {
        const row = sortedTable.insertRow();
        for (let i = 1; i <= 37; i++) {
            const indicator = `I${i}`;
            const cell = row.insertCell();
            if (sortedData[indicator][rank]) {
                cell.textContent = sortedData[indicator][rank].value.toFixed(4);
                if (medians[indicator]?.includes(rank)) {
                    const length = sortedData[indicator].length;
                    cell.style.backgroundColor = length % 2 === 1 ? '#fc8b83' : '#ff0004';
                }
            }
        }
    }
    sortedContainer.appendChild(sortedTable);
    window.scrollTo(0, document.body.scrollHeight);
}
    const formulasByTab = {
        'I1': '–†1/(–ü3 + 0.5*–ü5 + 0.1*–ü7)',
        'I2': '–†2/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I3': '–ü6/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I4': '–ü3/(–ü3 + –ü5)',
        'I5': '(–ü9/(–ü3 + –ü5 + –ü7 + –ü8)) - 0.5',
        'I6': '–ü10/(–ü3 + –ü5 + –ü8)',
        'I7': '0.3*–†23 + 0.1*–†24/(–ü3 + 0.5*–ü5 + –ü8)',   
        'I8': '–§1/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',  
        'I9': '–§2/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I10': '–§3/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I11': '–§4/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I12': '–§5/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I13': '–§6/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I14': '–§7/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I15': '–†3/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I16': '–†4/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I17': '–†5/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I18': '–†6/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I19': '–†7/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I20': '–†8/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I21': '–†7-8–í/(–†7+–†8)',
        'I22': '–†9/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I23': '–†10/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I24': '–†11/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I25': '–†12/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I26': '–†13-1/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I27': '–†13-2/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I28': '–†13-3/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I29': '–†14/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I30': '–†15/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I31': '–†16/–†15',
        'I32': '–†17/–†15',
        'I33': '–†18/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I34': '–†19/–†18',
        'I35': '–†20/(–ü3 + 0.5*–ü5 + 0.1*–ü7 + –ü8)',
        'I36': '–†21/–†20',
        'I37': '–†22/–†20'
    };
    const originalDescriptions = {
        '–ü1': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å —É—Å—ñ—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤ –Ω–∞—É–∫–æ–≤–æ—ó —É—Å—Ç–∞–Ω–æ–≤–∏ / –∑–∞–∫–ª–∞–¥—É –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏ –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏, –æ—Å—ñ–±',
        '–ü2': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å —à—Ç–∞—Ç–Ω–∏—Ö –æ–¥–∏–Ω–∏—Ü—å –Ω–∞—É–∫–æ–≤–∏—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤ (–¥–∞–ª—ñ ‚Äì –ù–ü) –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —à—Ç–∞—Ç–Ω–æ–≥–æ —Ä–æ–∑–ø–∏—Å—É, –æ—Å—ñ–±',
        '–ü3': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å –ù–ü –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏, –æ—Å—ñ–±',
        '–ü4': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å —à—Ç–∞—Ç–Ω–∏—Ö –æ–¥–∏–Ω–∏—Ü—å –Ω–∞—É–∫–æ–≤–æ-–ø–µ–¥–∞–≥–æ–≥—ñ—á–Ω–∏—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤ (–¥–∞–ª—ñ ‚Äì –ù–ü–ü) –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —à—Ç–∞—Ç–Ω–æ–≥–æ —Ä–æ–∑–ø–∏—Å—É, –æ—Å—ñ–±',
        '–ü5': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å –ù–ü–ü –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏, –æ—Å—ñ–±',
        '–ü6': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å –º–æ–ª–æ–¥–∏—Ö —É—á–µ–Ω–∏—Ö –∑ —á–∏—Å–ª–∞ –ù–ü —Ç–∞ –ù–ü–ü –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏, –æ—Å—ñ–±',
        '–ü7': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å –∞—Å–ø—ñ—Ä–∞–Ω—Ç—ñ–≤ –¥–µ–Ω–Ω–æ—ó —Ñ–æ—Ä–º–∏ –Ω–∞–≤—á–∞–Ω–Ω—è, –æ—Å—ñ–±',
        '–ü8': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å –¥–æ–∫—Ç–æ—Ä–∞–Ω—Ç—ñ–≤, –æ—Å—ñ–±',
        '–ü9': '–û—Ü—ñ–Ω–∫–∞ –≥–µ–Ω–¥–µ—Ä–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∂—ñ–Ω–æ–∫ –∑ —á–∏—Å–ª–∞ –ù–ü —Ç–∞ –ù–ü–ü –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏), –æ—Å—ñ–±',
        '–ü10': '–ß–∏—Å–µ–ª—å–Ω—ñ—Å—Ç—å –¥–æ–∫—Ç–æ—Ä—ñ–≤ —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó / –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤ –Ω–∞—É–∫  —Ç–∞ –¥–æ–∫—Ç–æ—Ä—ñ–≤ –Ω–∞—É–∫, –∑ —á–∏—Å–ª–∞ –ù–ü —Ç–∞ –ù–ü–ü —Ç–∞ –¥–æ–∫—Ç–æ—Ä–∞–Ω—Ç—ñ–≤, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏, –æ—Å—ñ–±',
        '–†1': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ù–ü, –ù–ü–ü —Ç–∞ / –∞–±–æ –∞—Å–ø—ñ—Ä–∞–Ω—Ç—ñ–≤, —è–∫–∏–º  –ø—Ä–∏—Å—É–¥–∂–µ–Ω–æ –Ω–∞—É–∫–æ–≤–∏–π —Å—Ç—É–ø—ñ–Ω—å –¥–æ–∫—Ç–æ—Ä–∞ —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó  (–∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –Ω–∞—É–∫) / –æ—Å–≤—ñ—Ç–Ω—å–æ-—Ç–≤–æ—Ä—á–∏–π —Å—Ç—É–ø—ñ–Ω—å  –¥–æ–∫—Ç–æ—Ä–∞ –º–∏—Å—Ç–µ—Ü—Ç–≤–∞, —è–∫—ñ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º  –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏ —Ç–∞ / –∞–±–æ –Ω–∞–≤—á–∞–ª–∏—Å—å —É –Ω–∞—É–∫–æ–≤—ñ–π  —É—Å—Ç–∞–Ω–æ–≤—ñ / –∑–∞–∫–ª–∞–¥—ñ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏, –æ—Å—ñ–±',
        '–†2': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ù–ü, –ù–ü–ü —Ç–∞/–∞–±–æ –¥–æ–∫—Ç–æ—Ä–∞–Ω—Ç—ñ–≤, —è–∫–∏–º  –ø—Ä–∏—Å—É–¥–∂–µ–Ω–æ –Ω–∞—É–∫–æ–≤–∏–π —Å—Ç—É–ø—ñ–Ω—å –¥–æ–∫—Ç–æ—Ä–∞ –Ω–∞—É–∫, —è–∫—ñ  –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –º—ñ—Å—Ü–µ–º —Ä–æ–±–æ—Ç–∏ —Ç–∞ / –∞–±–æ  –Ω–∞–≤—á–∞–ª–∏—Å—å –≤ –Ω–∞—É–∫–æ–≤—ñ–π —É—Å—Ç–∞–Ω–æ–≤—ñ / –∑–∞–∫–ª–∞–¥—ñ –≤–∏—â–æ—ó  –æ—Å–≤—ñ—Ç–∏, –æ—Å—ñ–±',
        '–†3': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–Ω–æ–≥—Ä–∞—Ñ—ñ–π, —è–∫—ñ —ñ–Ω–¥–µ–∫—Å—É—é—Ç—å—Å—è —É Scopus —Ç–∞ / –∞–±–æ Web of Science (–¥–∞–ª—ñ - WoS), –æ–¥.',
        '–†4': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–Ω–æ–≥—Ä–∞—Ñ—ñ–π, —è–∫—ñ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ –∑–∞ –∫–æ—Ä–¥–æ–Ω–æ–º –º–æ–≤–∞–º–∏ –∫—Ä–∞—ó–Ω –û–ï–°–† —Ç–∞ / –∞–±–æ –Ñ–°, –∫—Ä—ñ–º –º–æ–Ω–æ–≥—Ä–∞—Ñ—ñ–π, —è–∫—ñ –≤—Ä–∞—Ö–æ–≤–∞–Ω—ñ —É –ø–æ–∫–∞–∑–Ω–∏–∫—É –†3, –æ–¥.',
        '–†5': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–Ω–æ–≥—Ä–∞—Ñ—ñ–π, —è–∫—ñ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ –≤ –£–∫—Ä–∞—ó–Ω—ñ —Ç–∞ —ñ–Ω—à–∏—ó –º–æ–Ω–æ–≥—Ä–∞—Ñ—ñ–π (–∫—Ä—ñ–º –º–æ–Ω–æ–≥—Ä–∞—Ñ—ñ–π, —è–∫—ñ –≤—Ä–∞—Ö–æ–≤–∞–Ω–æ —É –ø–æ–∫–∞–∑–Ω–∏–∫–∞—Ö –†3 —Ç–∞ –†4), –æ–¥.',
        '–†6': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª—ñ–≤ –º–æ–Ω–æ–≥—Ä–∞—Ñ—ñ–π, —è–∫—ñ —ñ–Ω–¥–µ–∫—Å—É—é—Ç—å—Å—è —É Scopus —Ç–∞/–∞–±–æ WoS, –æ–¥.',
        '–†7': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–∏—Ö —Å—Ç–∞—Ç–µ–π, —è–∫—ñ —ñ–Ω–¥–µ–∫—Å—É—é—Ç—å—Å—è —É Scopus —Ç–∞/–∞–±–æ WoS –≤ –Ω–∞—É–∫–æ–≤–∏—Ö –∂—É—Ä–Ω–∞–ª–∞—ó –∑ –∫–≤–∞—Ä—Ç–∏–ª—è–º–∏ Q1, Q2**, –æ–¥.',
        '–†8': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–∏—Ö —Å—Ç–∞—Ç–µ–π, —è–∫—ñ —ñ–Ω–¥–µ–∫—Å—É—é—Ç—å—Å—è —É Scopus —Ç–∞/–∞–±–æ WoS –≤ –Ω–∞—É–∫–æ–≤–∏—Ö –∂—É—Ä–Ω–∞–ª–∞—Ö –∑ –∫–≤–∞—Ä—Ç–∏–ª—è–º–∏ Q3, Q4**, –æ–¥.',
        '–†7-8–í': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–∏—Ö —Å—Ç–∞—Ç–µ–π, —ñ–∑ –∑–∞–∑–Ω–∞—á–µ–Ω–∏—Ö —É –ø–æ–∫–∞–∑–Ω–∏–∫–∞—Ö –†7 —Ç–∞ –†8, –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –¥–æ—Å—Ç—É–ø—ñ, –æ–¥.',
        '–†9': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–∏—Ö —Å—Ç–∞—Ç–µ–π, —è–∫—ñ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ —É —Ñ–∞—Ö–æ–≤–∏—Ö –≤–∏–¥–∞–Ω–Ω—è—Ö –£–∫—Ä–∞—ó–Ω–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ë —Ç–∞/–∞–±–æ –ø—É–±–ª—ñ–∫–∞—Ü—ñ–π, —è–∫—ñ —ñ–Ω–¥–µ–∫—Å—É—é—Ç—å—Å—è —É Scopus —Ç–∞ / –∞–±–æ WoS (–∫—Ä—ñ–º –ø—É–±–ª—ñ–∫–∞—Ü—ñ–π, —è–∫—ñ –≤—Ä–∞—Ö–æ–≤–∞–Ω–æ —É –ø–æ–∫–∞–∑–Ω–∏–∫–∞—Ö –†7 —Ç–∞ –†8), –æ–¥.',
        '–†10': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö –ø—Ä–µ–ø—Ä–∏–Ω—Ç—ñ–≤***, —è–∫—ñ –º–∞—é—Ç—å DOI, –æ–¥.',
        '–†11': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤, –¥–æ–≤—ñ–¥–Ω–∏–∫—ñ–≤, –ø—ñ–¥—Ä—É—á–Ω–∏–∫—ñ–≤, –ø–æ—Å—ñ–±–Ω–∏–∫—ñ–≤, —Ö—Ä–µ—Å—Ç–æ–º–∞—Ç—ñ–π, –∫–∞—Ç–∞–ª–æ–≥—ñ–≤ —Ç–∞ –µ–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ–π, –∞–≤—Ç–æ—Ä, –∞—Ä.',
        '–†12': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–∏—Ö –≤–∏–¥–∞–Ω—å (–∂—É—Ä–Ω–∞–ª—ñ–≤), —â–æ –≤–∫–ª—é—á–µ–Ω–æ –¥–æ —Ñ–∞—Ö–æ–≤–∏—Ö –Ω–∞—É–∫–æ–≤–∏—Ö –≤–∏–¥–∞–Ω—å –£–∫—Ä–∞—ó–Ω–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ê, –æ–¥–Ω–æ—á–∞—Å–Ω–∏–º –∑–∞—Å–Ω–æ–≤–Ω–∏–∫–æ–º (—Å–ø—ñ–≤–∑–∞—Å–Ω–æ–≤–Ω–∏–∫–æ–º) —Ç–∞ –≤–∏–¥–≤–∞—Ü–µ–º —è–∫–∏—Ö —î –Ω–∞—É–∫–æ–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∞ / –∑–∞–∫–ª–∞–¥ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏, —Ç–∞ —è–∫—ñ —ñ–Ω–¥–µ–∫—Å—É–≤–∞–ª–∏—Å—å —É –∑–≤—ñ—Ç–Ω–æ–º—É —Ä–æ—Ü—ñ —É –Ω–∞—É–∫–æ–º–µ—Ç—Ä–∏—á–Ω–∏—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–∏—Ö  Scopus —Ç–∞/–∞–±–æ WoS, –æ–¥.',
        '–†(12-1)': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–∏—Ö –≤–∏–¥–∞–Ω—å (–∂—É—Ä–Ω–∞–ª—ñ–≤), —â–æ –≤–∫–ª—é—á–µ–Ω–æ –¥–æ —Ñ–∞—Ö–æ–≤–∏—Ö –Ω–∞—É–∫–æ–≤–∏—Ö –≤–∏–¥–∞–Ω—å –£–∫—Ä–∞—ó–Ω–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ë, –æ–¥–Ω–æ—á–∞—Å–Ω–∏–º –∑–∞—Å–Ω–æ–≤–Ω–∏–∫–æ–º (—Å–ø—ñ–≤–∑–∞—Å–Ω–æ–≤–Ω–∏–∫–æ–º) —Ç–∞ –≤–∏–¥–∞–≤—Ü–µ–º —è–∫–∏—Ö —î –Ω–∞—É–∫–æ–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∞ / –∑–∞–∫–ª–∞–¥ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏, –æ–¥.',
        '–†(12-2)': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö –Ω–∞–±–æ—Ä—ñ–≤ –¥–æ—Å–ª—ñ–¥–Ω–∏—Ü—å–∫–∏—Ö (–Ω–∞—É–∫–æ–≤–∏—Ö) –¥–∞–Ω–∏—Ö, –∑–æ–∫—Ä–µ–º–∞ FAIR-–¥–∞–Ω–∏—Ö****, –æ–¥.',
        '–†13-1': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –ø–∞—Ç–µ–Ω—Ç–Ω—ñ–≤ –£–∫—Ä–∞—ó–Ω–∏ –Ω–∞ –≤–∏–Ω–∞—Ö–æ–¥–∏ —Ç–∞ / –∞–±–æ —Å–æ—Ä—Ç–∏ —Ä–æ—Å–ª–∏–Ω —Ç–∞ / –∞–±–æ –ø–æ—Ä–æ–¥–∏ —Ç–≤–∞—Ä–∏–Ω, –æ–¥.',
        '–†13-2': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –ø–∞—Ç–µ–Ω—Ç—ñ–≤ –£–∫—Ä–∞—ó–Ω–∏ –Ω–∞ –∫–æ—Ä–∏—Å–Ω—ñ –º–æ–¥–µ–ª—ñ, –æ–¥.',
        '–†13-3': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –≤ –£–∫—Ä–∞—ó–Ω—ñ —Å–≤—ñ–¥–æ—Ü—Ç–≤ –∞–≤—Ç–æ—Ä—Å—å–∫–æ–≥–æ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ–º–ø—é—Ç–µ—Ä–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏, –æ–¥.',
        '–†14': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏—Ö –ø–∞—Ç–µ–Ω—Ç—ñ–≤, —è–∫—ñ –æ–±–ª—ñ–∫–æ–≤—É—é—Ç—å—Å—è –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏–º–∏ –ø–∞—Ç–µ–Ω—Ç–Ω–∏–º–∏ –±–∞–∑–∞–º–∏, –æ–¥.',
        '–†15': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–¥–∞–Ω–∏—Ö —Ç–∞ –ø—Ä–∏–π–Ω—è—Ç–∏—Ö –¥–æ —Ä–æ–∑–≥–ª—è–¥—É –∑–∞—è–≤–æ–∫ –Ω–∞ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ –≥—Ä–∞–Ω—Ç–∏ –∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —ñ —Ä–æ–∑—Ä–æ–±–æ–∫ –∑–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–∞–º–∏ (–ì–æ—Ä–∏–∑–æ–Ω—Ç 2020, –ì–æ—Ä–∏–∑–æ–Ω—Ç –Ñ–≤—Ä–æ–ø–∞, –Ñ–≤—Ä–∞—Ç–æ–º, –ù–ê–¢–û, –£–ù–¢–¶), –æ–¥.',
        '–†16': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞—è–≤–æ–∫, —ñ–∑ –∑–∞–Ω–∞—á–µ–Ω–∏—Ö —É –ø–æ–∫–∞–∑–Ω–∏–∫—É –†15, —É —è–∫–∏—Ö –Ω–∞—É–∫–æ–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∞ / –∑–∞–∫–ª–∞–¥ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏ —î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º (–æ—Å–Ω–≤–Ω–∏–º –∑–∞—è–≤–Ω–∏–∫–æ–º), –æ–¥.',
        '–†17': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞—è–≤–æ–∫, —ñ–∑ –∑–∞–∑–Ω–∞—á–µ–Ω–∏—Ö —É –ø–æ–∫–∞–∑–Ω–∏–∫—É –†15, —è–∫—ñ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –ø–µ—Ä–µ–º–æ–∂—Ü—è–º–∏ —Ç–∞ –ø—Ä–æ—Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∞–Ω—ñ, –æ–¥.',
        '–†18': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–¥–∞–Ω–∏—Ö —Ç–∞ –ø—Ä–∏–π–Ω—è—Ç–∏—Ö –¥–æ —Ä–æ–∑–≥–ª—è–¥—É –∑–∞—è–≤–æ–∫ –Ω–∞ –∑–∞–≥–∞–ª—å–Ω–æ–¥–µ—Ä–¥–∞–≤–Ω—ñ***** –∫–æ–Ω–∫—É—Ä—Å–Ω—ñ –≤—ñ–¥–±–æ—Ä–∏ –ø—Ä–æ—î–∫—Ç—ñ–≤ –∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —Ä–æ–∑—Ä–æ–±–æ–∫, —è–∫—ñ —Ñ—ñ–Ω–∞–Ω—Å—É—é—Ç—å—Å—è –∑–∞ —Å–ø–µ—Ü—Ñ–æ–Ω–¥–æ–º (–∫–æ–Ω–∫—É—Ä—Å–∏ –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å –£–∫—Ä–∞—ó–Ω–∏, –ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤–∞ –æ—Å–≤—ñ—Ç–∏ —ñ –Ω–∞—É–∫–∏ –£–∫—Ä–∞—ó–Ω–∏, –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—ó –∞–∫–∞–¥–µ–º—ñ—ó –Ω–∞—É–∫ –£–∫—Ä–∞—ó–Ω–∏, –£–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ —Ñ–æ–Ω–¥—É —Å—Ç–∞—Ä—Ç–∞–ø—ñ–≤, –£–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ –∫—É–ª—å—Ç—É—Ä–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É), –¥–µ –Ω–∞—É–∫–æ–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∞ / –∑–∞–∫–ª–∞–¥ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏ —î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º (–∑–∞—è–≤–Ω–∏–∫–æ–º), –æ–¥.',
        '–†19': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞—è–≤–æ–∫, —è–∫—ñ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –ø–µ—Ä–µ–º–æ–∂—Ü—è–º–∏ –∑–∞–≥–∞–ª—å–Ω–æ–¥–µ—Ä–∂–∞–≤–Ω–∏—Ö***** –∫–æ–Ω–∫—É—Ä—Å–Ω–∏—Ö –≤—ñ–¥–±–æ—Ä—ñ–≤, —Ç–∞ –æ—Ç—Ä–∏–º–∞–ª–∏ —Ñ—ñ–Ω–∞–Ω—Å—É–≤–∞–Ω–Ω—è –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —ñ —Ä–æ–∑—Ä–æ–±–æ–∫, —è–∫—ñ —Ñ—ñ–Ω–∞–Ω—Å—É—é—Ç—å—Å—è –∑–∞ —Å–ø–µ—Ü—Ñ–æ–Ω–¥–æ–º (–∫–æ–Ω–∫—É—Ä—Å–∏ –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω—Ü—É –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å –£–∫—Ä–∞—ó–Ω–∏, –ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤–∞ –æ—Å–≤—ñ—Ç–∏ —ñ –Ω–∞—É–∫–∏ –£–∫—Ä–∞—ó–Ω–∏, –£–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ —Ñ–æ–Ω–¥—É —Å—Ç–∞—Ä—Ç–∞–ø—ñ–≤, –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—ó –∞–∫–∞–¥–µ–º—ñ—ó –Ω–∞—É–∫ –£–∫—Ä–∞—ó–Ω–∏, –£–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ –∫—É–ª—å—Ç—É—Ä–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É), –¥–µ –Ω–∞—É–∫–æ–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∞ / –∑–∞–∫–ª–∞–¥ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏ —î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º (–∑–∞—è–≤–Ω–∏–∫–æ–º), –æ–¥.',
        '–†20': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–¥–∞–Ω–∏—Ö —Ç–∞ –ø—Ä–∏–π–Ω—è—Ç–∏—Ö –¥–æ —Ä–æ–∑–≥–ª—è–¥—É –∑–∞—è–≤–æ–∫ –Ω–∞ —ñ–Ω—à—ñ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ –≥—Ä–∞–Ω—Ç–æ–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏, –∑–æ–∫—Ä–µ–º–∞, —Ç—ñ, —è–∫—ñ –º–∞—é—Ç—å –Ω–∞—É–∫–æ–≤—É —Å–∫–ª–∞–¥–æ–≤—É (Erasmus+, Creative Europe —Ç–∞ —ñ–Ω—à—ñ –Ω–∞—É–∫–æ–≤—ñ –≥—Ä–∞–Ω—Ç–æ–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –∫—Ä–∞—ó–Ω –Ñ–°, —è–∫—ñ –æ–±–ª—ñ–∫–æ–≤—É—é—Ç—å—Å—è –Ω–∞ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö –Ñ–≤—Ä–æ–ø–µ–π—Å—å–∫–æ—ó –∫–æ–º—ñ—Å—ñ—ó, –æ–¥.',
        '–†21': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞—è–≤–æ–∫, —ñ–∑ –∑–∞–∑–Ω–∞—á–µ–Ω–∏—Ö —É –ø–æ–∫–∞–∑–Ω–∏–∫—É –†20, —É —è–∫–∏—Ö –Ω–∞—É–∫–æ–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∞/–∑–∞–∫–ª–∞–¥ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏ —î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º ( –æ—Å–Ω–æ–≤–Ω–∏–º –∑–∞—è–≤–Ω–∏–∫–æ–º), –æ–¥.',
        '–†22': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞—è–≤–æ–∫, —ñ–∑ –∑–∞–∑–Ω–∞—á–µ–Ω–∏—Ö —É –ø–æ–∫–∞–∑–Ω–∏–∫—É –†20, —è–∫—ñ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –ø–µ—Ä–µ–º–æ–∂—Ü—è–º–∏ —Ç–∞ –ø—Ä–æ—Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∞–Ω—ñ, –æ–¥.',
        '–†23': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –µ–∫—Å–ø–µ—Ä—Ç–Ω–∏—Ö —Ä–æ–ª–µ–π –ù–ü —Ç–∞ –ù–ü–ü (–µ–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏—Ö –∫–æ–Ω–∫—É—Ä—Å—ñ–≤: –ì–æ—Ä–∏–∑–æ–Ω—Ç 2020, –ì–æ—Ä–∏–∑–æ–Ω—Ç –Ñ–≤—Ä–æ–ø–∞, –Ñ–≤—Ä–∞—Ç–æ–º, Erasmus+), –æ–¥.',
        '–†24': '–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –µ–∫—Å–ø–µ—Ä—Ç–Ω–∏—Ö —Ä–æ–ª–µ–π –ù–ü —Ç–∞ –ù–ü–ü (–µ–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –∑–∞–≥–∞–ª—å–Ω–æ–¥–µ—Ä–∂–∞–≤–Ω–∏—Ö***** –∫–æ–Ω–∫—É—Ä—Å–Ω–∏—Ö –≤—ñ–¥–±–æ—Ä—ñ–≤ –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å –£–∫—Ä–∞—ó–Ω–∏, –ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤–∞ –æ—Å–≤—ñ—Ç–∏ —ñ –Ω–∞—É–∫–∏ –£–∫—Ä–∞—ó–Ω–∏; —É—á–∞—Å—Ç—å –≤ –µ–∫—Å–ø–µ—Ä—Ç–Ω–∏—Ö –≥—Ä—É–ø–∞—Ö —Ç–∞ –∫–æ–º—ñ—Å—ñ—è—Ö –ú–û–ù –∑ –ø–∏—Ç–∞–Ω—å –¥–µ—Ä–∂–∞–≤–Ω–æ—ó –∞—Ç–µ—Å—Ç–∞—Ü—ñ—ó –Ω–∞—É–∫–æ–≤–∏—Ö —É—Å—Ç–∞–Ω–æ–≤ / –∑–∞–∫–ª–∞–¥—ñ–≤ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏ —Ç–∞ / –∞–±–æ –ø—Ä–æ—Ü–µ–¥—É—Ä –ø—Ä–∏—Å—É–¥–∂–µ–Ω–Ω—è –Ω–∞—É–∫–æ–≤–æ–≥–æ —Å—Ç—É–ø–µ–Ω—è —É —Ä–∞–∑–æ–≤—ñ–π —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –≤—á–µ–Ω–æ—ó —Ä–∞–¥–∏ –∑–∞–∫–ª–∞–¥—É –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏, –Ω–∞—É–∫–æ–≤–æ—ó —É—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–æ –ø—Ä–∏—Å—É–¥–∂–µ–Ω–Ω—è —Å—Ç—É–ø–µ–Ω—è –¥–æ–∫—Ç–æ—Ä–∞ —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó), –æ–¥.',
        '–§1': '–û–±—Å—è–≥ –∫–æ—à—Ç—ñ–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —ñ —Ä–æ–∑—Ä–æ–±–æ–∫, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–≥–æ –≤—ñ–¥–±–æ—Ä—É —Å–µ—Ä–µ–¥ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö –Ω–∞—É–∫–æ–≤–∏—Ö –ø—Ä–æ–≥—Ä–∞–º (–≥—Ä–∞–Ω—Ç–∏ (–ø—Ä–æ—î–∫—Ç–∏) –ì–æ—Ä–∏–∑–æ–Ω—Ç 2020, –ì–æ—Ä–∏–∑–æ–Ω—Ç –Ñ–≤—Ä–æ–ø–∞, –ù–ê–¢–û, –Ñ–≤—Ä–∞—Ç–æ–º, —ñ–Ω—à—ñ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ –ø—Ä–æ—î–∫—Ç–∏, –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –ü–æ—Ä—è–¥–∫—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏—Ö –Ω–∞—É–∫–æ–≤–æ-—Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –ø—Ä–æ–≥—Ä–∞–º —ñ –ø—Ä–æ—î–∫—Ç—ñ–≤, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –≤ —Ä–∞–º–∫–∞—Ö –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –Ω–∞—É–∫–æ–≤–æ-—Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏—Ü—Ç–≤–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º–∏ –≤—á–µ–Ω–∏–º–∏, –∞ —Ç–∞–∫–æ–∂ –≥—Ä–∞–Ω—Ç—ñ–≤, —â–æ –Ω–∞–¥–∞—é—Ç—å—Å—è –≤ —Ä–∞–º–∫–∞—Ö —Ç–∞–∫–æ–≥–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏—Ü—Ç–≤–∞, –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ–≥–æ –Ω–∞–∫–∞–∑–æ–º –ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤–∞ –æ—Å–≤—ñ—Ç–∏ —ñ –Ω–∞—É–∫–∏ –£–∫—Ä–∞—ó–Ω–∏ –≤—ñ–¥ 20 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2017 —Ä–æ–∫—É ‚Ññ1507, –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ–≥–æ –≤ –ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤—ñ —é—Å—Ç–∏—Ü—ñ—ó –£–∫—Ä–∞—ó–Ω–∏ 27 –≥—Ä—É–¥–Ω—è 2017 —Ä–æ–∫—É –∑–∞ ‚Ññ1564/31432)',
        '–§2': '–û–±—Å—è–≥ –∫–æ—à—Ç—ñ–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —ñ —Ä–æ–∑—Ä–æ–±–æ–∫–æ, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏—Ö –∫–æ–Ω–∫—É—Ä—Å–Ω–∏—Ö –≤—ñ–¥–±–æ—Ä—ñ–≤ (–∫—Ä—ñ–º –≥—Ä–∞–Ω—Ç—ñ–≤ (–ø—Ä–æ—î–∫—Ç—ñ–≤), –≤—Ä–∞—Ö–æ–≤–∞–Ω–∏—Ö —É –ø–æ–∫–∞–∑–Ω–∏–∫—É –§1), –∞ —Ç–∞–∫–æ–∂ –≥—Ä–∞–Ω—Ç–∏ (–ø—Ä–æ—î–∫—Ç–∏) –∑ –Ω–∞—É–∫–æ–≤–æ—é —Å–∫–ª–∞–¥–æ–≤–æ—é) (Erasmus+, Creative Europe —Ç–∞ —ñ–Ω—à—ñ –Ω–∞—É–∫–æ–≤—ñ –≥—Ä–∞–Ω—Ç–æ–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –∫—Ä–∞—ó–Ω –Ñ–° —Ç–∞/–∞–±–æ –û–ï–°–†)',
        '–§3': '–û–±—Å—è–≥ –∫–æ—à—Ç—ñ–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —ñ —Ä–æ–∑—Ä–æ–±–æ–∫, —è–∫—ñ –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∑–∞–≥–∞–ª—å–Ω–æ–¥–µ—Ä–∂–∞–≤–Ω–∏—Ö***** –∫–æ–Ω–∫—É—Ä—Å–Ω–∏—Ö –≤—ñ–¥–±–æ—Ä—ñ–≤ —Ñ—ñ–Ω–∞–Ω—Å—É—é—Ç—å—Å—è —ñ–∑ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É –î–µ—Ä–∂–∞–≤–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç—É –£–∫—Ä–∞—ó–Ω–∏ (–¥–µ—Ä–∂–∞–≤–Ω—ñ –Ω–∞—É–∫–æ–≤—ñ –≥—Ä–∞–Ω—Ç–∏, –ø—Ä–æ—î–∫—Ç–∏ —Ç–∞ –∫–æ–Ω–∫—É—Ä—Å–∏)',
        '–§4': '–û–±—Å—è–≥ –∫–æ—à—Ç—ñ–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö (–Ω–∞—É–∫–æ–≤–æ-—Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö) —Ä–æ–±—ñ—Ç —Ç–∞ –ø–æ—Å–ª—É–≥ –∑–∞ –≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏/–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ —Ç–∞/–∞–±–æ –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–º–∏ —É–≥–æ–¥–∞–º–∏, —è–∫—ñ —Ñ—ñ–Ω–∞–Ω—Å—É—é—Ç—å—Å—è —ñ–Ω–æ–∑–µ–º–Ω–∏–º–∏ —Ñ—ñ–∑–∏—á–Ω–∏–º–∏/—é—Ä–∏–¥–∏—á–Ω–∏–º–∏ –æ—Å–æ–±–∞–º–∏ (–æ–∫—Ä—ñ–º –§1 —Ç–∞ –§2)',
        '–§5': '–û–±—Å—è–≥ –∫–æ—à—Ç—ñ–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö (–Ω–∞—É–∫–æ–≤–æ-—Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö) —Ä–æ–±—ñ—Ç —Ç–∞ –ø–æ—Å–ª—É–≥ –∑–∞ –≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏/–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ —Ç–∞/–∞–±–æ –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–º–∏ —É–≥–æ–¥–∞–º–∏, —è–∫—ñ —Ñ—ñ–Ω–∞—Å—É—é—Ç—å—Å—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º–∏ —Ñ—ñ–∑–∏—á–Ω–∏–º–∏ / —é—Ä–∏–¥–∏—á–Ω–∏–º–∏ –æ—Å–æ–±–∞–º–∏ (–æ–∫—Ä—ñ–º –§3)',
        '–§(5-1)': '–û–±—Å—è–≥ –∫–æ—à—Ç—ñ–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –Ω–∞ —Ä–∞—Ö—É–Ω–∫–∏ –Ω–∞—É–∫–æ–≤–æ–≥–æ –ø–∞—Ä–∫—É, –∑–∞—Å–Ω–æ–≤–Ω–∏–∫–æ–º (—Å–ø—ñ–≤–∑–∞—Å–Ω–æ–≤–Ω–∏–∫–æ–º) —è–∫–æ–≥–æ —î –ù–£ / –ó–í–û, –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—É–∫–æ–≤–∏—Ö (–Ω–∞—É–∫–æ–≤–æ-—Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö) —Ä–æ–±—ñ—Ç –Ω–∞ –Ω–∞–¥–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥ –∑–∞ –≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏ / –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ —Ç–∞ / –∞–±–æ –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–º–∏ —É–≥–æ–¥–∞–º–∏. (–ö–æ—à—Ç–∏, —â–æ –Ω–∞–¥—ñ–π—à–ª–∏ –Ω–∞ —Ä–∞—Ö—É–Ω–∫–∏ –Ω–∞—É–∫–æ–≤–æ–≥–æ –ø–∞—Ä–∫—É, –∑–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è —É —á–∞—Å—Ç—Ü—ñ, —è–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —á–∞—Å—Ç—Ü—ñ –ù–£ / –ó–í–û, —É —Å—Ç–∞—Ç—É—Ç–Ω–æ–º—É –∫–∞–ø—ñ—Ç–∞–ª—ñ –Ω–∞—É–∫–æ–≤–æ–≥–æ –ø–∞—Ä–∫—É)',
        '–§6': '–ë–∞–ª–∞–Ω—Å–æ–≤–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –ø—Ä–∏–¥–±–∞–Ω–æ–≥–æ, –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ —É –≤–ª–∞—Å–Ω—ñ—Å—Ç—å –Ω–∞—É–∫–æ–≤–æ–≥–æ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è',
        '–§7': '–í–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Ä–æ–∑–≤–∏—Ç–æ–∫ –Ω–∞—É–∫–æ–≤–æ—ó –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ –∑ –ø–æ–∑–∞–Ω–∞—É–∫–æ–≤–∏—Ö —Ä–∞—Ö—É–Ω–∫—ñ–≤ –Ω–∞—É–∫–æ–≤–æ—ó —É—Å—Ç–∞–Ω–æ–≤–∏ / –∑–∞–∫–ª–∞–¥—É –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏, –æ–∫—Ä—ñ–º —Ñ–æ–Ω–¥—É –∑–∞—Ä–æ–±—ñ—Ç–Ω–æ—ó –ø–ª–∞—Ç–∏ –ù–ü–ü, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –§–æ—Ä–º—É–ª–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—É –≤–∏–¥–∞—Ç–∫—ñ–≤ –¥–µ—Ä–∂–∞–≤–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç—É –Ω–∞ –≤–∏–∑—É –æ—Å–≤—ñ—Ç—É –º—ñ–∂ –∑–∞–∫–ª–∞–¥–∞–º–∏ –≤–∏—â–æ—ó –æ—Å–≤—ñ—Ç–∏, –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ—é –ø–æ—Å—Ç–∞–Ω–æ–≤–æ—é –ö–∞–±—ñ–Ω–µ—Ç—É –ú—ñ–Ω—ñ—Å—Ç—Ä—ñ–≤ –£–∫—Ä–∞—ó–Ω–∏ –≤—ñ–¥ 24 –≥—Ä—É–¥–Ω—è 2019 —Ä–æ–∫—É ‚Ññ1146, —Å—Ç–∞–ª–∏—Ö (–µ–Ω–¥–∞–≤–º–µ–Ω—Ç) —Ñ–æ–Ω–¥—ñ–≤ –ó–í–û, –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö –≥—Ä–∞–Ω—Ç—ñ–≤ –Ω–∞ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è (–æ–∫—Ä—ñ–º —Ñ—ñ–Ω–∞–Ω—Å—É–≤–∞–Ω–Ω—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —ñ–∑ –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É) —Ç–æ—â–æ)'
    }; 
    function adjustIndicatorHeights() {
    const groups = Array.from(document.querySelectorAll('.indicator-group'));
    const rows = [];
    while(groups.length) {
        rows.push(groups.splice(0, 3));
    }
    rows.forEach(row => {
        const maxHeight = Math.max(...row.map(group => group.offsetHeight));
        row.forEach(group => group.style.height = `${maxHeight}px`);
    });
}
    let indicatorValues = {};
function updateGroupBackgroundColors() {
    document.querySelectorAll('.indicator-group').forEach(group => {
        const inputs = group.querySelectorAll('input');
        const allFilled = Array.from(inputs).every(input => input.value.trim() !== '');
        group.classList.toggle('filled', allFilled);
    });
}
function initializeCalculator() {
        const allIndicators = new Set();
        Object.values(formulasByTab).forEach(formula => {
            const parsed = parseFormula(formula);
            if (parsed) {
                parsed.numerator.forEach(t => allIndicators.add(t.variable));
                parsed.denominator.forEach(t => allIndicators.add(t.variable));
            }
        });
        const sortedIndicators = Array.from(allIndicators).sort((a, b) => {
            const getParts = (indicator) => {
                const match = indicator.match(/^([^\d]*)(\d+)/);
                return {
                    prefix: match ? match[1] : indicator,
                    num: match ? parseInt(match[2]) : 0
                };
            };
            const aParts = getParts(a);
            const bParts = getParts(b);
            const prefixOrder = { '–†': 1, '–ü': 2, '–§': 3 };
            const aOrder = prefixOrder[aParts.prefix] || 4;
            const bOrder = prefixOrder[bParts.prefix] || 4;
            if (aOrder !== bOrder) return aOrder - bOrder;
            if (aParts.num !== bParts.num) return aParts.num - bParts.num;
            return a.localeCompare(b);
        });
        const indicatorsContainer = document.getElementById('indicatorGroupsContainer');
        sortedIndicators.forEach(variable => {
            const group = document.createElement('div');
            group.className = 'indicator-group';
            group.innerHTML = `
    <h3>${variable} <span class="average-value" id="average_${variable}"></span></h3>
    <p>${originalDescriptions[variable] || ''}</p>
    <div class="year-inputs">
        ${[2020, 2021, 2022, 2023, 2024].map(year => `
            <div class="year-input">
                <label>${year}</label>
                <input type="number" 
                       data-variable="${variable}"
                       data-year="${year}" 
                       step="0.1" 
                       value="">
            </div>
        `).join('')}
    </div>
`;
            indicatorsContainer.appendChild(group);
        });
        const formulasContainer = document.getElementById('formulasContainer');
        Object.entries(formulasByTab).forEach(([indicator, formula]) => {
            const section = document.createElement('div');
            section.className = 'formula-section';
            section.setAttribute('data-indicator', indicator);  // Add this line
            section.innerHTML = `
                <div class="formula-container" id="formula_${indicator}"></div>
                <div id="result_${indicator}"></div>
            `;
            formulasContainer.appendChild(section);
        });
        updateFormulaHighlights();
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', () => {
                calculateAll();
                updateFormulaHighlights();
                updateGroupBackgroundColors(); 
            });
        });
        calculateAll();
        updateGroupBackgroundColors();
        adjustIndicatorHeights();
}
function calculateAll() {
    indicatorValues = {};
    indicatorResults = {}; 
    document.querySelectorAll('[data-variable]').forEach(input => {
    const varName = input.dataset.variable;
    const year = parseInt(input.closest('.year-input').querySelector('label').textContent);
    indicatorValues[varName] = indicatorValues[varName] || {};
    const value = input.value.trim();
    indicatorValues[varName][year] = value === '' ? null : parseFloat(value);
});
    const averages = {};
    Object.keys(indicatorValues).forEach(varName => {
    const yearsData = indicatorValues[varName];
    const allNull = Object.values(yearsData).every(val => val === null);
    if (allNull) {
        averages[varName] = null;
    } else {
        const sum = Object.values(yearsData).reduce((acc, val) => acc + (val !== null ? val : 0), 0);
        averages[varName] = sum / 5;
    }
});
    Object.entries(averages).forEach(([varName, avg]) => {
    const avgElement = document.getElementById(`average_${varName}`);
    if (avgElement) {
        if (avg === null) {
            avgElement.textContent = '';
        } else {
            avgElement.textContent = `(—Å–µ—Ä–µ–¥–Ω—î: ${avg.toFixed(4)})`;
        }
    }
});
    Object.entries(formulasByTab).forEach(([indicator, formula]) => {
        const parsed = parseFormula(formula);
        if (!parsed) return;
        const numerator = parsed.numerator.reduce((acc, term) => 
            acc + (averages[term.variable] || 0) * term.coefficient, 0);
        const denominator = parsed.denominator.reduce((acc, term) => 
            acc + (averages[term.variable] || 0) * term.coefficient, 0);
        let result = denominator !== 0 ? numerator / denominator : 0;
        if (parsed.subtractConstant !== 0) {
            result = Math.abs(result - parsed.subtractConstant);
        }
        indicatorResults[indicator] = result;
        document.getElementById(`result_${indicator}`).innerHTML = `
            <p><b>${indicator} = ${result.toFixed(4)}</b></p>
        `;
    });
}
    function parseFormula(formula) {
        if (formula.includes(') - 0.5')) {
            const mainPart = formula.replace(') - 0.5', '');
            const parts = mainPart.split('/');
            if (parts.length !== 2) return null;
            return parseFormulaParts(parts[0], parts[1], 0.5);
        }
        const parts = formula.split('/');
        if (parts.length !== 2) return null;
        return parseFormulaParts(parts[0], parts[1], 0);
    }
    function parseFormulaParts(numPart, denPart, subtract) {
        return {
            numerator: parseTerms(numPart),
            denominator: parseTerms(denPart),
            subtractConstant: subtract
        };
    }
    function parseTerms(expression) {
        return expression.split('+').map(term => {
            const cleaned = term.trim().replace(/[()]/g, '');
            const [coeff, ...vars] = cleaned.split('*').map(p => p.trim());
            return {
                coefficient: parseFloat(coeff) || 1,
                variable: vars.join('*') || coeff
            };
        });
    }
    function updateFormulaHighlights() {
        Object.entries(formulasByTab).forEach(([indicator, formula]) => {
            const container = document.getElementById(`formula_${indicator}`);
            const parsed = parseFormula(formula);
            if (!parsed) return;
            const tempDiv = document.createElement('div');
            tempDiv.style.visibility = 'hidden';
            tempDiv.style.position = 'absolute';
            const formulaHTML = generateFormulaHTML(indicator, parsed);
            const variables = new Set();
parsed.numerator.forEach(term => variables.add(term.variable));
parsed.denominator.forEach(term => variables.add(term.variable));
const allComplete = Array.from(variables).every(v => isVariableComplete(v));
const section = document.querySelector(`.formula-section[data-indicator="${indicator}"]`);
section?.classList.toggle('filled', allComplete);
            tempDiv.innerHTML = formulaHTML;
            document.body.appendChild(tempDiv);
            MathJax.Hub.Queue(() => {
                MathJax.Hub.Typeset(tempDiv, () => {
                    container.innerHTML = tempDiv.innerHTML;
                    document.body.removeChild(tempDiv);
                    setTimeout(() => {
                        container.style.opacity = 1;
                    }, 50);
                });
            });
        });
    }
    function generateFormulaHTML(indicator, parsed) {
        const numerator = parsed.numerator.map(term => {
            const isComplete = isVariableComplete(term.variable);
            const varClass = isComplete ? 'input-complete' : 'input-incomplete';
            const coeffPart = term.coefficient !== 1 ? `\\class{highlight-constant}{${term.coefficient}} \\cdot ` : '';
            return `${coeffPart}\\class{${varClass}}{${term.variable}}`;
        }).join(' + ');
        const denominator = parsed.denominator.map(term => {
            const isComplete = isVariableComplete(term.variable);
            const varClass = isComplete ? 'input-complete' : 'input-incomplete';
            const coeffPart = term.coefficient !== 1 ? `\\class{highlight-constant}{${term.coefficient}} \\cdot ` : '';
            return `${coeffPart}\\class{${varClass}}{${term.variable}}`;
        }).join(' + ');
        let formula = `\\[${indicator} = \\frac{${numerator}}{${denominator}}\\]`;
        if (parsed.subtractConstant !== 0) {
            formula = `\\[${indicator} = \\left|\\frac{${numerator}}{${denominator}} - ${parsed.subtractConstant}\\right|\\]`;
        }
        return formula;
    }
    function isVariableComplete(variable) {
        const inputs = document.querySelectorAll(`input[data-variable="${variable}"]`);
        return Array.from(inputs).every(input => {
            const value = input.value.trim();
            return value !== '' && !isNaN(value);
        });
    }
    initializeCalculator();
    document.getElementById('uploadMultiJson').addEventListener('change', function(e) {
    const files = Array.from(e.target.files);
    const button = document.getElementById('uploadMultiJsonBtn');
    if (files.length === 0) {
        button.textContent = '(—á–∏) –í—Å—Ç–∞–≤—Ç–µ –≥–æ—Ç–æ–≤—ñ JSON–∏ –¥–ª—è –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ–≤ üìö';
        button.style.opacity = '0.65';
        return;
    }
    const truncatedNames = files.map(file => {
        const name = file.name;
        return name.length > 35 ? `${name.substring(0, 35)}` : name;
    });
    let lines = [];
    lines.push(`–î–æ–¥–∞–Ω–æ —Ñ–∞–π–ª—ñ–≤ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ–≤ - ${files.length}, –∞ —Å–∞–º–µ:`);
    lines.push(``);
if (truncatedNames.length > 20) {
    truncatedNames.slice(0, 10).forEach(name => lines.push(`‚Ä¢ ${name}`));
    lines.push('( ... )');
    truncatedNames.slice(-10).forEach(name => lines.push(`‚Ä¢ ${name}`));
} else {
    truncatedNames.forEach(name => lines.push(`‚Ä¢ ${name}`));
}
    lines.push(``);
    lines.push(`–ü—Ä–æ–≥–æ—Ä–Ω—ñ—Ç—å –Ω–∏–∂—á–µ —Ç–∞ –æ—Ü—ñ–Ω—ñ—Ç—å –≤–µ—Å—å –Ω–∞–ø—Ä—è–º ‚¨áÔ∏è`);
    lines.push(`–ß–∏ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∑–Ω–æ–≤—É –∞–±–∏ –¥–æ–¥–∞—Ç–∏ —ñ–Ω—à—ñ —Ñ–∞–π–ª–∏ üíæ`);
    button.textContent = lines.join('\n');
    button.style.opacity = '1';
});
    document.getElementById('uploadJson').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            const data = JSON.parse(e.target.result);
            document.getElementById('calculationName').value = data.calculationName || '';
            Object.entries(data).forEach(([variable, years]) => {
                Object.entries(years).forEach(([year, value]) => {
                    const input = document.querySelector(`input[data-variable="${variable}"][data-year="${year}"]`);
                    if (input && value !== null) {
                        input.value = value;
                    }
                });
            });
            calculateAll();
            updateFormulaHighlights();
            updateGroupBackgroundColors();
        };
        reader.readAsText(file);
    });
function saveDataToJson() {
    const data = {};
    data.calculationName = document.getElementById('calculationName').value.trim() || '–ë–µ–∑ –Ω–∞–∑–≤–∏';
    document.querySelectorAll('[data-variable]').forEach(input => {
    const varName = input.dataset.variable;
    const year = parseInt(input.closest('.year-input').querySelector('label').textContent);
    const value = input.value.trim();
    if (!data[varName]) data[varName] = {};
    data[varName][year] = value === '' ? null : parseFloat(value);
});
    data.averages = {};
    const yearsToAverage = [2020, 2021, 2022, 2023, 2024];
    Object.keys(data).forEach(key => {
    if (key === 'calculationName' || key === 'calculatedResults' || key === 'averages') return;
    const variableData = data[key];
    const validValues = yearsToAverage
        .map(year => variableData[year] !== null ? parseFloat(variableData[year]) : null)
        .filter(val => val !== null);
    
    if (validValues.length === 0) {
        data.averages[key] = null;
    } else {
        const sum = validValues.reduce((acc, val) => acc + val, 0);
        data.averages[key] = sum / validValues.length;
    }
});
    data.calculatedResults = indicatorResults;
    const calculationNameForFile = document.getElementById('calculationName').value.trim();
    const sanitizedName = calculationNameForFile 
        ? calculationNameForFile.replace(/ /g, '_') 
        : '–ë–µ–∑_–Ω–∞–∑–≤–∏';
    const now = new Date();
    const timeStr = [
        now.getHours().toString().padStart(2, '0'),
        now.getMinutes().toString().padStart(2, '0'),
        now.getSeconds().toString().padStart(2, '0')
    ].join('');
    const filename = `${sanitizedName}_${timeStr}.json`;
    const jsonStr = JSON.stringify(data, null, 2);
    const blob = new Blob([jsonStr], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();
    URL.revokeObjectURL(url);
}
    document.getElementById('saveJsonBtn').addEventListener('click', saveDataToJson);
</script>
</body>
</html>
